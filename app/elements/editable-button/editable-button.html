<!-- <link rel="import" href="../..//bower_components/polymer/polymer-element.html"> -->

<!-- <link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../..//bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html"> -->


<!-- define the component in polymer -->
<dom-module id="editable-button">
  <template>
    <style>
      :host {
        /* display: flex; */
        vertical-align: middle;
        /* --textcontent-underline: 0; 
        margin: 0;
        padding: 0; */
      }

      /* paper-button paper-textarea paper-input-container iron-autogrow-textarea .mirror-text {
        visibility: visible;
        width: 90%;
      } */
      /* #textinput {
        color: var(--paper-input-container-input-color, black);
      } */

      /* #editbtn {
        text-transform: lowercase;
        font-size: 1em;
        cursor: pointer;
      } */
      
      #textinput {
        /* display: flex; */
        margin: 0;
        border: 0;
        padding: 0;
        /* border: var(--textinput-border); */
      }

      paper-textarea {
        vertical-align: middle;
        --paper-input-container-underline: {
          display: none;
        };
        --paper-input-container-underline-focus: {
          display: none;
        };
        --paper-input-container-underline-disabled: {
          display: none;
        };
        --paper-input-container-input-focus: {
          border: 1px solid gray;
        };
        /* --paper-input-container-input: {
          color: black;
        }; */
        --iron-autogrow-textarea: {
          display: inherit;
          line-height: 100%;
          font-size: 1em;
          text-transform: lowercase;
        };
      }

    /* could use a "--paper-input-container-placeholder"! */

      
      /* iron-autogrow-textarea {
        --iron-autogrow-textarea: {
          width: 90%;
        }
      } */
      
      
      paper-button {
        /* display: inherit; */
        font-size: 1em;
        vertical-align: middle;
        height: 2em;
        min-width: 0;
        --paper-button: {
          background: white;
          color: black;
        };
      }

      paper-button iron-icon {
        display: inline-flex;
        --iron-icon-height: 1em;
        --iron-icon-width: 1em;
      }

      .margin-small {
        margin: 10px 0px;
      }

    </style>

    <!-- <div> -->
    <paper-button id$="editbtn_[[buttonID]]" contenteditable="true" raised>
      <template is="dom-if" if="[[fieldIcon]]">
        <iron-icon icon$="[[fieldIcon]]"></iron-icon>
      </template>
      <paper-textarea id="textinput" no-label-float value={{content::input}}></paper-textarea>
      <iron-icon icon="close" id="removebtn"></iron-icon>
    </paper-button>
    <!-- </div> -->
    
  </template>

  <script>
    // /**
    //  * `editable-button`
    //  * An editable button
    //  *
    //  * @customElement
    //  * @polymer
    //  * @demo demo/index.html
    //  */
    class EditableButton extends Polymer.Element {
      // constructor
      constructor() {
        super();
      }

      // returns the name of the component
      static get is() { return 'editable-button'; }

      // defines the component's properties
      static get properties() {
        return {
          buttonID: {
            type: Number
          },
          content: {
            type: String,
            value: 'default',
            reflectToAttribute: true,
            notify: true,
            // observer: '_handleUpdateContent'
          },
          fieldName: {
            type: String
          },
          fieldIcon: {
            type: String,
            notify: true,
          },
          // selected: {
          //   type: Boolean
          // }Ã­
          // icon: {
          //   type: String,
          //   value: "",
          // }
        };
      }

      // Called before the element is attached to the page
      ready() {
        // call the superclass
        super.ready();

        var removeBtn = this.$.removebtn;
        removeBtn.addEventListener('click', () => {
          this.remove();
        });
        
        var textInput = this.$.textinput;

        textInput.addEventListener('keyup', e => {
          if(e.keyCode === 13) {
            // this._onEnter();
            textInput.blur();
          }
        });

        // textInput.addEventListener("blur", e => {
        //   this._onEnter();
        // })

        textInput.addEventListener('keypress', e => {
          if(e.keyCode === 13) {
            e.preventDefault();
          }
        });

        console.log("content", this.content);
      }

      // _setBorderStyle() {
      //   this.updateStyles({
      //     '--textinput-border': "1px solid black",
      //   });
      // }

      // _onEnter() {
      //   this.updateStyles({
      //     '--textinput-border': "0",
      //   });
      // }

      // _handleUpdateContent(newValue, oldValue) {
      //   console.log("old", oldValue);
      //   console.log("new", newValue);
      //   console.log("***", Polymer.dom(parent));
      // }
    }

    window.customElements.define(EditableButton.is, EditableButton);
  </script>
</dom-module>
